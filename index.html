<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScratchJr Web</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ×¡×’× ×•× ×•×ª × ×•×¡×¤×™× ×× ×¦×¨×™×š */
        #stage {
            position: relative;
            width: 550px;
            height: 450px;
        }

        #character {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: grab;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="logo">ScratchJr</div>
        <div class="header-icons">
            <span class="icon">ğŸ’¾</span>
            <span class="icon">ğŸ“„</span>
            <span class="icon">â–¶ï¸</span>
            <span class="icon">â•</span>
            <span class="icon">â„¹ï¸</span>
            <span class="icon" id="grid-toggle">GRID</span>
        </div>
    </header>

    <main>
        <div class="stage-container">
            <div id="stage">
                <img id="character" src="assets/images/CAT.svg" alt="Cat" draggable="true">
            </div>
        </div>
        <div class="palette-and-programming">
            <div id="block-palette">
                <div class="category-tabs">
                    <button class="category-tab" data-category="end">
                        <img src="assets/images/end.svg" alt="End">
                    </button>
                    <button class="category-tab" data-category="control">
                        <img src="assets/images/control.svg" alt="Control">
                    </button>
                    <button class="category-tab" data-category="sound">
                        <img src="assets/images/sound.svg" alt="Sound">
                    </button>
                    <button class="category-tab" data-category="looks">
                        <img src="assets/images/looks.svg" alt="Looks">
                    </button>
                    <button class="category-tab" data-category="motion">
                        <img src="assets/images/motion.svg" alt="Motion">
                    </button>
                    <button class="category-tab active" data-category="triggering">
                        <img src="assets/images/triggering.svg" alt="Triggers">
                    </button>
                </div>
                <div id="end-blocks" class="block-category" data-category="end"></div>
                <div id="control-blocks" class="block-category" data-category="control"></div>
                <div id="sound-blocks" class="block-category" data-category="sound"></div>
                <div id="looks-blocks" class="block-category" data-category="looks"></div>
                <div id="motion-blocks" class="block-category" data-category="motion"></div>
                <div id="triggering-blocks" class="block-category active" data-category="triggering"></div>
            </div>

            <div id="programming-area">
                <div class="program-header">Program <span id="clear-all">Clear All</span></div>
                <div id="program-blocks"></div>
            </div>
        </div>
    </main>
</div>

<script src="js/script.js"></script>
<script>
    const character = document.getElementById('character');
    const stage = document.getElementById('stage');

    character.addEventListener('dragstart', (event) => {
        event.dataTransfer.setData('text/plain', ''); // Required for drag to work in Firefox
    });

    stage.addEventListener('dragover', (event) => {
        event.preventDefault(); // Allow drop
    });

    stage.addEventListener('drop', (event) => {
        event.preventDefault();

        const stageRect = stage.getBoundingClientRect();
        const characterWidth = character.offsetWidth;
        const characterHeight = character.offsetHeight;

        let x = event.clientX - stageRect.left - characterWidth / 2;
        let y = event.clientY - stageRect.top - characterHeight / 2;

        // Stay within stage bounds
        x = Math.max(0, Math.min(x, stageRect.width - characterWidth));
        y = Math.max(0, Math.min(y, stageRect.height - characterHeight));

        character.style.left = x + 'px';
        character.style.top = y + 'px';
    });
</script>
</body>
</html>
