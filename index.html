<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScratchJr Web</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ×¡×’× ×•× ×•×ª × ×•×¡×¤×™× ×× ×¦×¨×™×š */
        #stage {
            position: relative; /* ×—×©×•×‘! */
        }
        #character {
            position: absolute; /* ×—×©×•×‘! */
            cursor: grab;
            /* ×”×•×¡×¤×” ×©×œ transition ×›×“×™ ×œ×ª×ª ×ª×—×•×©×” ×™×•×ª×¨ × ×¢×™××” */
            transition: all 0.1s ease-out;
            /* ×”×•×¡×¤×” ×›×“×™ ×©×”×“××•×ª ×ª×ª×—×™×œ ×‘×××¦×¢ */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <div class="logo">ScratchJr</div>
            <div class="header-icons">
                <span class="icon">ğŸ’¾</span>
                <span class="icon">ğŸ“„</span>
                <span class="icon">â–¶ï¸</span> <!-- ××¦×‘ ××¦×’×ª -->
                <span class="icon">â•</span> <!-- ×”×•×¡×£ ×¢××•×“ -->
                <span class="icon">â„¹ï¸</span> <!-- ××™×“×¢ ×¢×œ ×”×¤×¨×•×™×§×˜ -->
                <span class="icon" id="grid-toggle">GRID</span> <!-- ×›×¤×ª×•×¨ ×§×•×•×™ GRID -->
            </div>
        </header>

        <main>
            <div class="stage-container">
                <div id="stage">
                    <!-- ×›××Ÿ ×”×“××•×™×•×ª ×•×”×¨×§×¢ ×™×•×¦×’×• -->
                    <img id="character" src="assets/images/CAT.svg" alt="Cat">
                </div>
            </div>
            <div class="palette-and-programming">

                <div id="block-palette">
                    <!-- ×›××Ÿ ×™×•×¦×’×• ×”×‘×œ×•×§×™× ×”×©×•× ×™× -->
                    <div class="category-tabs">
                        <button class="category-tab" data-category="end">
                            <img src="assets/images/end.svg" alt="End">
                        </button>
                        <button class="category-tab" data-category="control">
                            <img src="assets/images/control.svg" alt="Control">
                        </button>
                        <button class="category-tab" data-category="sound">
                            <img src="assets/images/sound.svg" alt="Sound">
                        </button>
                        <button class="category-tab" data-category="looks">
                            <img src="assets/images/looks.svg" alt="Looks">
                        </button>
                        <button class="category-tab" data-category="motion">
                            <img src="assets/images/motion.svg" alt="Motion">
                        </button>
                        <button class="category-tab active" data-category="triggering">
                            <img src="assets/images/triggering.svg" alt="Triggers">
                        </button>
                    </div>
                    <div id="end-blocks" class="block-category" data-category="end"></div>
                    <div id="control-blocks" class="block-category" data-category="control"></div>
                    <div id="sound-blocks" class="block-category" data-category="sound"></div>
                    <div id="looks-blocks" class="block-category" data-category="looks"></div>
                    <div id="motion-blocks" class="block-category" data-category="motion"></div>
                    <div id="triggering-blocks" class="block-category active" data-category="triggering"></div>

                </div>

                <div id="programming-area">
                    <!-- ×›××Ÿ ×”××©×ª××© ×™×’×¨×•×¨ ×•×™×—×‘×¨ ×‘×œ×•×§×™× -->
                    <div class="program-header">Program <span id="clear-all">Clear All</span></div>
                    <div id="program-blocks"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/script.js"></script>
    <script>
        const character = document.getElementById('character');
        const stage = document.getElementById('stage');
        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;

        character.addEventListener('mousedown', (e) => {
            isDragging = true;
            offsetX = e.clientX - character.getBoundingClientRect().left;
            offsetY = e.clientY - character.getBoundingClientRect().top;
            character.style.cursor = 'grabbing';
        });

        // ×©×™× ×•×™ ××©××¢×•×ª×™ - ×”×•×¡×¤×ª Event Listener ×œ×‘××” ×‘××§×•× ×œ document
        stage.addEventListener('mouseup', () => {
            isDragging = false;
            character.style.cursor = 'grab';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;

            // ×”×’×‘×œ×ª ×”×ª× ×•×¢×” ×œ×ª×—×•××™ ×”×‘××”
            const stageRect = stage.getBoundingClientRect();
            let x = e.clientX - offsetX - stageRect.left;
            let y = e.clientY - offsetY - stageRect.top;

            // ×”×’×‘×œ×ª ×”×’×¨×™×¨×” ×‘×ª×•×š ×”×‘××”
            const characterWidth = character.offsetWidth;
            const characterHeight = character.offsetHeight;

            // ×ª×™×§×•×Ÿ ××™×§×•× ×”-X
            if (x < 0) {
                x = 0;
            } else if (x + characterWidth > stageRect.width) {
                x = stageRect.width - characterWidth;
            }

            // ×ª×™×§×•×Ÿ ××™×§×•× ×”-Y
            if (y < 0) {
                y = 0;
            } else if (y + characterHeight > stageRect.height) {
                y = stageRect.height - characterHeight;
            }

            character.style.left = x + 'px';
            character.style.top = y + 'px';
        });

        character.addEventListener('dragstart', (e) => {
            e.preventDefault(); // ×× ×™×¢×ª ×’×¨×™×¨×ª ×ª××•× ×” ×¨×’×™×œ×”
        });
    </script>
</body>
</html>
